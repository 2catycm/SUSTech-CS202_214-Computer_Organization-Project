# 南科图智 Verilog FPGA 代码编写规范 
叶璨铭， 12011404@mail.sustech.edu.cn
[TOC]
## 0. 前言
## 1. 基本约定
### 1.1 文件编码

- 文件编码：对于国人为主要开发者的项目，使用GBK编码，理由如下
  - Vivado方便性：
  - VsCode方便性：
  - 编码大小：GBK
- 如何正确使用GBK编码？
  - 实际开发中，常常出现推送到git分支后文件编码乱码，在其他人电脑无法显示的问题。
  - 

### 1.2 文件夹与文件夹结构


### 1.3 

## 2. Verilog 编程规范

### 2.1 文件
- 文件头注释
  - 禁止使用vivado自带注释。
  - 使用短而有效的注释。
  - 
- 文件的概念
  - 是模块的集合，一个文件包括多个模块。
  - 约定：
    - 文件对外暴露一个公共模块，该模块可以被其他文件的模块例化。
    - 文件内其他模块仅能在文件内进行例化。
  - 理由：借鉴Java编程规范。这样能够实现高内聚（私有模块只在文件内可见、互相调用）低耦合（文件之间的关系最多涉及一个模块）。

- 文件名
  - 约定：文件名应该与公共模块名一致。
  - 理由：借鉴Java编程规范。这样能够让看到文件的人一目了然。
### 2.2 模块概述

- 模块的概念。
  - 模块是对输入信号进行组织、连接，不断提供输出信号的电路抽象层次。
  - 模块类似于一个类，可以被实例化。
  - 有成员变量，并且可以分为输入和输出两种变量，对应只写/只读成员变量。
  - 成员函数/方法通过使能信号来实现。
- 模块名
  - 大写驼峰
  - 理由：对应Java类。
- 输入输出风格
  - 命名：i/o+大写驼峰
  - 例子：
  - 理由：对应类的只写/只读成员变量
  - 例外，管脚约束变量使用 **大写下划线**分割大单词，**大写驼峰**分割小单词。
- 局部变量
  - 为了进行连线，局部往往产生wire类型的中间变量。
  
  - 约定：使用**小写驼峰**
  - 类似于软件编程语言的函数内局部变量。
    - 可以认为我们对Verilog模块编写的所有代码，都是在对类进行构造。我们在一个构造函数中。
- 数据变量
  - 为了进行数据、状态的保存，往往局部使用reg类型
  - - 约定：使用**d+大写驼峰**，d表示data(数据)。
- 模块例化
  - 例化相当于是面向对象的组合，描述了一种绑定关系。
  - 例化的同时，子模块会有自己的数据状态，因此例化可以视作例化者自身通过例化被例化的模块获得了数据变量。
  - 因此例化也是用**d+大写驼峰**的格式。
### 2.3 模块例化
- 模块例化在Verilog中有两种风格，
  - 类似C语言结构体的.绑定
  - 类似函数调用的顺序绑定。
- 约定：禁止使用顺序绑定
- 理由：
  - 基本原则：重构在软件开发中非常重要。我们主要考虑重构的方便性。
  


### 2.4 模块输入输出
- 模块输入输出在Verilog中有两种风格，
  - 
## 参考文献
[^1]: 华为大规模逻辑设计指导书.pdf

[^2]: https://verilogcodingstyle.readthedocs.io/en/latest/source/1BasicSyntax_cn.html